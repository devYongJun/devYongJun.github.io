---
title: HTTP 완벽가이드를 읽고
author: Yongjun
date: 2021-06-15 00:00:00 +0800
categories: [book, http]
tags: [http]
---
![book](../../assets/img/book/httpguide.jpg)

백엔드 개발자로 전직을 위해서 웹의 배경지식을 익히려고 읽은 책이다(꽤 두껍다).

게임개발에서 바이블이라고 불리는 용책이 있듯이 웹개발의 바이블은 이 다람쥐책이 아닐까.. 🐿️

재밌게 술술 읽히는 내용도 있었고, 여러번 다시 봐도 도저히 무슨말인지 이해할수 없는 내용도 있었지만 결과적으로 얻은게 굉장히 많은 책이었다.

나중에 백엔드 경험이 쌓이고 다시 이 책을 읽게 된다면 그때는 지금 얻지 못한 다른 깨달음을 얻을 수 있을 것 같다 .

---

### HTTP (Hypertext Transfer Porotocol)

웹에서 클라이언트와 서버가 데이터를 주고받는 방식으로 현대 인터넷에 공용어라고 말할 수 있다.
`웹 클라이언트가 웹 서버에서 요청 → 웹 서버가 웹 클라이언트에게 응답`이 하나의 HTTP 트랜잭션이다.

---
### MIME

웹 클라이언트가 서버에게 요청하는 리소스는 html, txt, jpeg, avi 등 수많은 종류가 있고 이것들을 MIME(Multipurpose Internet Mail Extensions)라는 라벨을 붙여 구분한다.  
MIME 은 `주 타입/부 타입` 으로 구성된 문자열이며 `text/html, image/jpeg, image/gif, video/quicktime` 과 같이 표기한다.

---
### URI

웹 클라이언트는 웹 서버의 특정 리소스를 식별하는 방식으로 URI(Uniform Resource IDentifier) 를 사용한다.  
URI의 종류로는 URL(Uniform Resource Locator)과 URN(Uniform Resource Name)이 있고 오늘날 대부분의 URI는 URL를 사용하며 `https://dogecoin.com/assets/img/doge.png` 과 같이 표기한다.  
URL의 9개의 요소로 구성되며 실제로 모든 구성요소를 가지는 URL은 거의 없다.  

```
<스킴>://<사용자이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>?<질의>#<프래그먼트>
```

스킴 : 사용할 프로토콜로 주로 http, ftp 등이 있다.  
사용자 이름, 비밀번호 : 이 정보를 요구하는 대표적인 프로토콜로 ftp가 있다. 입력하지 않으면 기본적으로 anonymous, 이메일 주소가 들어간다.  
호스트 : 우리에게 가장 익숙한 IP주소, 도메인이름이다. ([naver.com](http://naver.com))  
포트 : http는 기본적으로 포트를 입력하지않으면 80을 사용하며 호스트이름과 함께 꼭 있어야 한다. ([naver.com:80](http://naver.com:80))  
경로 : 서버상의 리소스의 위치를 나타낸다.  
파라미터 : 서버가 리소스를 찾는데 필요한 추가정보.  
질의 : 데이터베이스 같은 서비스들은 요청받을 리소스 형식의 범위를 좁히기 위해 질의를 받을 수 있다.  
프래그먼트 : 리소스 안에 있는 특정 부분을 가리킬 수 있다. 리소스 전체가 아닌 일부를 원할때 사용한다.  

---
### Method

HTTP 요쳥메시지에는 어떤 동작이 수행되어야 하는지 구분하는 메서드 타입이있다.  
GET : 서버에 리소스를 달라고 요청하기 위해 쓰인다.  
HEAD : GET 처럼 동작하지만 본문없이 응답한다.  
PUT : 서버에 문서를 쓰는 것을 요청한다.  
POST : 서버에 데이터를 전송하기 위해 설계 되었다.  
TRACE : 메시지가 방화벽,프록시,게이트웨이 등을 지나온 기록을 확인한다.  
OPTIONS : 웹 서버가 어떤 메서드를 지원하는지 알아내기 위해 사용한다.  
DELETE : 서버에 리소스를 삭제 할것을 요청한다.

---
### Status Code

모든 웹 서버의 응답에는 상태 코드가 있다.이 상태코드로 요청이 성공적으로 처리되었는지, 다른 조치가 필요한지 알수 있고 대표적으로 `200 (성공), 302 (다시 시도), 404 (리소스 찾을수 없음)`등이 있다.   
상태코드에는 텍스트로 이루어진 사유구절도 함께 포함되며 이것은 단지 설명만을 위해서 존재하는것일뿐 실제 응답처리는 숫자로된 코드가 사용된다.
  
100~199 : 정보성 상태 코드   
200~299 : 성공 상태 코드  
300~399 : 리다이렉션 상태 코드  
400~499 : 클라이언트 에러 상태 코드  
500~599 : 서버 에러 상태 코드

---
### Message

요청 메세지, 응답 메세지는 `시작줄, 헤더, 본문` 으로 구성되어있다.  
  
시작줄 : 요청이라면 무엇을 해야하는지, 응답이라면 어떤일이 일어났는지 나타낸다.  
헤더 : `이름: 값`으로 구성된 0개이상의 헤더 줄이 있을 수 있다. 헤더의 끝은 빈 줄로 표시한다.  
본문 : 텍스트, 바이너리등 어떠한 데이터도 본문에 들어갈 수 있다.

---
**요청 메세지 구성**

```
<메서드> <요청 URL> <버전>
<헤더>

<본문> # 없을 수도 있다.
```

---
**응답 메시지 구성**

```
<버전> <상태코드> <사유 구절>
<헤더>

<본문> # 없을 수도 있다.
```

---
### TCP/IP (Transmission Control Protocol / Internet Protocol)

HTTP는 TCP라는 신뢰성 있는 인터넷 전송 프로토콜 위에서 동작한다.   
클라이언트가 서버에게 메시지를 전송하기전에 먼저 TCP/IP 연결을 해야 한다.  
연결할 서버를 알아내기위해 IP주소와 포트번호를 사용하며 이 정보는 URL을 통해 알아 낼 수 있다.  
기본적인 절차는 `TCP 연결 → HTTP 요청 → HTTP 응답 → TCP 해제` 순서로 동작한다.

---
### Proxy

클라이언트와 서버 사이에서 요청과 응답 중개하는 서버로 보안과 성능 최적화를 위해 쓰인다.
  
**보안**  
 회사에서 무언가를 다운받을때  바이러스를 검출하거나 학교에서 성인 컨텐츠로 접근을 막는다.  
**캐시**  
많은 사용자로부터 자주 요청받는 문서는 프록시가 사본을 가지고 있다가 직접 클라이언트에게 주는 방식으로 본 서버에 부하를 줄일 수 있다.  

---
### Gateway 
프록시처럼 클라이언트와 서버 중간에 위치한다.  
서버가 FTP 같은 다른 프로토콜을 사용하더라도 게이트웨이가 처리해 주어 클라이언트는 HTTP 요청만으로 원하는 응답을 받을 수 있다.

`클라이언트 → HTTP 요청 → 프록시 → FTP 요청 → 서버 → FTP 응답 → 프록시 → HTTP 응답 → 클라이언트`

---
🚧 틈날때마다 추가 예정